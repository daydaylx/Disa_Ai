{
  "generatedAt": "2025-09-07T00:00:00Z",
  "pages": [
    {
      "name": "Chat",
      "component": "src/views/ChatView.tsx",
      "route": "#/chat/:id?",
      "notes": "Haupt-Chat mit Nachrichtenliste, Composer (Portal), Scroll-FAB, Status-Header"
    },
    {
      "name": "Chats",
      "component": "src/views/ChatsView.tsx",
      "route": "#/chats",
      "notes": "Liste aller Unterhaltungen: Neu, Öffnen, Umbenennen, Löschen"
    },
    {
      "name": "Quickstart",
      "component": "src/views/QuickStartView.tsx",
      "route": "#/quickstart",
      "notes": "Schnellstartfragen, füllt den Composer per localStorage und navigiert zum Chat"
    },
    {
      "name": "Settings",
      "component": "src/views/SettingsView.tsx",
      "route": "#/settings",
      "notes": "API‑Key, Modell, Stil, Rollen-Template, Tokens, Composer-Offset"
    }
  ],
  "layout": [
    {
      "name": "AppShell",
      "component": "src/App.tsx",
      "parts": [
        "Header mit Nav-Pills",
        "BottomNav (floating)",
        "Aurora Background",
        "Network/Android Banner"
      ]
    },
    {
      "name": "BottomNav",
      "component": "src/components/layout/BottomNav.tsx",
      "tokens": ["--bottomnav-h"],
      "notes": "Setzt via ResizeObserver die CSS‑Var für unteres Padding"
    },
    {
      "name": "Composer",
      "component": "src/views/ChatView.tsx (Portal)",
      "tokens": ["--bottomnav-h"],
      "notes": "Fixierte Eingabeleiste; Abstand = safe-area + --bottomnav-h + composerOffset"
    }
  ],
  "components": [
    {
      "name": "Button",
      "component": "src/components/ui/Button.tsx",
      "variants": ["primary", "secondary", "ghost", "destructive"]
    },
    { "name": "Icon", "component": "src/components/ui/Icon.tsx" },
    { "name": "ToastsProvider", "component": "src/components/ui/toast/ToastsProvider.tsx" },
    { "name": "NetworkBanner", "component": "src/components/NetworkBanner.tsx" },
    { "name": "InstallBanner", "component": "src/components/InstallBanner.tsx" },
    { "name": "Avatar", "component": "src/components/chat/Avatar.tsx" },
    { "name": "TypingIndicator", "component": "src/components/chat/TypingIndicator.tsx" },
    { "name": "ScrollToEndFAB", "component": "src/components/chat/ScrollToEndFAB.tsx" },
    { "name": "CodeBlock", "component": "src/components/CodeBlock.tsx" },
    { "name": "InlineNote", "component": "src/components/InlineNote.tsx" },
    { "name": "HeroCard", "component": "src/components/HeroCard.tsx" },
    { "name": "ModelPicker", "component": "src/components/ModelPicker.tsx" },
    { "name": "Switch", "component": "src/components/Switch.tsx" }
  ],
  "duplicates": [
    {
      "name": "Button (legacy)",
      "component": "src/components/Button.tsx",
      "duplicateOf": "src/components/ui/Button.tsx"
    },
    {
      "name": "ToastProvider (legacy)",
      "component": "src/components/toast/ToastProvider.tsx",
      "duplicateOf": "src/components/ui/toast/ToastsProvider.tsx"
    },
    {
      "name": "Icon (legacy)",
      "component": "src/components/Icon.tsx",
      "duplicateOf": "src/components/ui/Icon.tsx"
    },
    {
      "name": "TabBar (router)",
      "component": "src/components/nav/TabBar.tsx",
      "duplicateOf": "src/components/layout/BottomNav.tsx"
    },
    {
      "name": "Orb (indicator)",
      "component": "src/components/Orb.tsx",
      "duplicateOf": "src/components/status/OrbStatus.tsx"
    },
    {
      "name": "Shell/Header (alt)",
      "component": "src/components/Shell.tsx / src/components/Header.tsx",
      "duplicateOf": "App.tsx Header"
    },
    {
      "name": "InlineBanner",
      "component": "src/components/InlineBanner.tsx",
      "duplicateOf": "src/components/InlineNote.tsx"
    },
    { "name": "guard backup", "component": "src/ui/guard.ts.bak", "duplicateOf": "src/ui/guard.ts" }
  ],
  "events": [
    {
      "component": "App Header",
      "selector": "a.nav-pill[Chat]",
      "action": "nav({ name: 'chat' })"
    },
    {
      "component": "App Header",
      "selector": "a.nav-pill[Chats]",
      "action": "nav({ name: 'chats' })"
    },
    {
      "component": "App Header",
      "selector": "a.nav-pill[Quickstart]",
      "action": "nav({ name: 'quickstart' })"
    },
    {
      "component": "App Header",
      "selector": "a.nav-pill[Einstellungen]",
      "action": "nav({ name: 'settings' })"
    },

    { "component": "BottomNav", "selector": "button[Chat]", "action": "location.hash = '#/chat'" },
    {
      "component": "BottomNav",
      "selector": "button[Unterhaltungen]",
      "action": "location.hash = '#/chats'"
    },
    {
      "component": "BottomNav",
      "selector": "button[Quickstart]",
      "action": "location.hash = '#/quickstart'"
    },
    {
      "component": "BottomNav",
      "selector": "button[Einstellungen]",
      "action": "location.hash = '#/settings'"
    },

    { "component": "ChatView", "testid": "composer-send", "action": "send()" },
    { "component": "ChatView", "testid": "composer-stop", "action": "stop()" },
    {
      "component": "ChatView",
      "label": "Kopieren (Nachricht)",
      "action": "clipboard.writeText(msg.content); toasts.push('Kopiert')"
    },
    {
      "component": "ChatView",
      "label": "Mehr (⋯)",
      "action": "toggle menuFor; Menü → Löschen = remove message"
    },

    {
      "component": "QuickStartView",
      "label": "Frage (Button)",
      "action": "localStorage.setItem('disa:prefill', q); location.hash = '#/chat'"
    },

    { "component": "ChatsView", "label": "Neu", "action": "conv.create(title); onOpen(id)" },
    { "component": "ChatsView", "label": "Öffnen", "action": "onOpen(id)" },
    { "component": "ChatsView", "label": "Löschen", "action": "conv.remove(id)" },
    { "component": "ChatsView", "label": "Titel (onBlur)", "action": "conv.rename(id, value)" },

    { "component": "SettingsView", "label": "Speichern (API-Key)", "action": "setApiKey(key)" },
    { "component": "SettingsView", "label": "Stil Select", "action": "setStyle(value)" },
    { "component": "SettingsView", "label": "Gedächtnis Switch", "action": "setMemoryEnabled(v)" },
    { "component": "SettingsView", "label": "Max Tokens", "action": "setCtxMaxTokens(n)" },
    { "component": "SettingsView", "label": "Reserve Tokens", "action": "setCtxReservedTokens(n)" },
    { "component": "SettingsView", "label": "Composer Offset", "action": "setComposerOffset(n)" },
    {
      "component": "SettingsView",
      "label": "Modell wählen (ModelPicker)",
      "action": "setSelectedModelId(id)"
    },

    { "component": "NetworkBanner", "event": "offline", "action": "setShow(true)" },
    {
      "component": "InstallBanner",
      "label": "Installieren",
      "action": "beforeinstallprompt.prompt()"
    }
  ],
  "spacingTokens": [
    {
      "token": "--bottomnav-h",
      "setBy": "BottomNav (ResizeObserver)",
      "usedIn": [
        "ChatView paddingBottom",
        "ChatsView paddingBottom",
        "SettingsView paddingBottom",
        "QuickStartView paddingBottom",
        "Composer bottom style calc"
      ]
    }
  ]
}
