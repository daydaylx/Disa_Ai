@import "./styles/design-system-tokens.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Modern Slate Glass Theme Variables - Using Tailwind color palette references */
  /* These map to Tailwind's zinc scale defined in tailwind.config.ts */
  --bg-app: theme(colors.bg.app);
  /* stylelint-disable-next-line @stylistic/number-leading-zero */
  --bg-surface-1: theme(colors.surface.1);
  /* stylelint-disable-next-line @stylistic/number-leading-zero */
  --bg-surface-2: theme(colors.surface.2);
  --text-primary: theme(colors.ink.primary);
  --text-secondary: theme(colors.ink.secondary);
  --text-tertiary: theme(colors.ink.tertiary);
  --border-color: theme(colors.border.DEFAULT);

  /* Page-specific accent CSS variables for custom use */
  --accent-chat: theme(colors.accent-chat.DEFAULT);
  --accent-chat-dim: theme(colors.accent-chat.dim);
  --accent-chat-glow: theme(colors.accent-chat.glow);
  --accent-models: theme(colors.accent-models.DEFAULT);
  --accent-models-dim: theme(colors.accent-models.dim);
  --accent-models-glow: theme(colors.accent-models.glow);
  --accent-roles: theme(colors.accent-roles.DEFAULT);
  --accent-roles-dim: theme(colors.accent-roles.dim);
  --accent-roles-glow: theme(colors.accent-roles.glow);
  --accent-settings: theme(colors.accent-settings.DEFAULT);
  --accent-settings-dim: theme(colors.accent-settings.dim);

  /* Viewport Height Fix */
  --vh: 1vh;

  /* ============================================================================
     PREMIUM DARK GLASS SYSTEM (Layered, token-based)
     - glass-1: Cards/Panels
     - glass-2: Sticky Header / Floating Composer
     - glass-3: Dialogs / Overlays
     ========================================================================== */
  --glass-bg-1: rgba(18, 18, 24, 0.78);
  --glass-bg-1-hover: rgba(18, 18, 24, 0.84);
  --glass-bg-2: rgba(10, 10, 14, 0.86);
  --glass-bg-2-hover: rgba(10, 10, 14, 0.9);
  /* Glass-3: Premium Glassmorphism für Drawers/Overlays - transparent aber lesbar */
  /* Ausbalanciert: Genug Opacity für Text-Lesbarkeit + echter Glaseffekt */
  --glass-bg-3: rgba(18, 18, 21, 0.75);
  --glass-bg-3-hover: rgba(18, 18, 21, 0.82);

  --glass-blur-1: 14px;
  --glass-blur-2: 22px;
  /* Moderater Blur für Glasmorphism - Balance zwischen Effekt und Performance */
  --glass-blur-3: 24px;

  --glass-border-1: rgba(255, 255, 255, 0.1);
  --glass-border-1-hover: rgba(255, 255, 255, 0.14);
  --glass-border-2: rgba(255, 255, 255, 0.12);
  --glass-border-2-hover: rgba(255, 255, 255, 0.16);
  /* Klare Border für Glassmorphism-Definition */
  --glass-border-3: rgba(255, 255, 255, 0.15);
  --glass-border-3-hover: rgba(255, 255, 255, 0.22);

  --glass-shadow-1: 0 10px 35px rgba(0, 0, 0, 0.38);
  --glass-shadow-1-hover: 0 14px 46px rgba(0, 0, 0, 0.46);
  --glass-shadow-2: 0 14px 46px rgba(0, 0, 0, 0.5);
  --glass-shadow-2-hover: 0 18px 58px rgba(0, 0, 0, 0.58);
  /* Weicher aber sichtbarer Shadow für glasmorphe Panels */
  --glass-shadow-3: 0 12px 40px rgba(0, 0, 0, 0.5);
  --glass-shadow-3-hover: 0 16px 50px rgba(0, 0, 0, 0.6);

  --glass-edge-highlight: rgba(255, 255, 255, 0.06);
  --glass-edge-highlight-strong: rgba(255, 255, 255, 0.09);
  --glass-focus-ring: rgba(139, 92, 246, 0.38);

  /* Status glows (centralized; avoid inline rgba shadows in components) */
  --shadow-status-success: 0 0 16px rgba(16, 185, 129, 0.28);
  --shadow-status-error: 0 0 16px rgba(239, 68, 68, 0.28);
  --shadow-status-warning: 0 0 16px rgba(245, 158, 11, 0.28);
  --shadow-status-info: 0 0 16px rgba(6, 182, 212, 0.28);

  /* Card + Tint System - Disa Frame Branding */
  --card-radius: 16px;
  --card-bg: rgba(16, 20, 30, 0.78);
  --card-border-width: 1px;
  --card-border-color: rgba(255, 255, 255, 0.08);
  --card-border-color-hover: rgba(255, 255, 255, 0.12);
  --card-border-color-focus: rgba(139, 92, 246, 0.3);
  --card-shadow: 0 6px 18px rgba(0, 0, 0, 0.32);
  --card-shadow-hover: 0 10px 26px rgba(0, 0, 0, 0.38);
  --card-shadow-focus: 0 0 0 2px rgba(139, 92, 246, 0.34), 0 10px 26px rgba(0, 0, 0, 0.38);
  --card-shadow-pressed: 0 4px 14px rgba(0, 0, 0, 0.42);

  --tint-angle: 90deg;
  --tint-fade-x: 65%;
  --tint-alpha-soft: 0.08;
  --tint-alpha-hero: 0.16;
  --tint-alpha-strong: 0.2;
  --tint-color-rgb-default: 139 92 246;

  --role-teal-rgb: 45 212 191;
  --role-magenta-rgb: 236 72 153;

  /* ========================================================================
     MOBILE-ADAPTIVE BLUR - GPU-friendly für AnimatedBrandmark
     3-Tier System: Full (Desktop) → Reduced (Mobile) → Minimal (A11y)
     ======================================================================== */
  --blur-aurora-mobile: 8px;
  --blur-aurora-desktop: 32px;
  --blur-aurora-heavy-mobile: 12px;
  --blur-aurora-heavy-desktop: 48px;
  --blur-neon-mobile: 6px;
  --blur-neon-desktop: 16px;

  /* Frame/Notch System - Disa AI Signature Visual */
  --frame-radius: 16px;
  --frame-border-width: 1px;
  --frame-border-color: rgba(255, 255, 255, 0.18);
  --frame-border-color-hover: rgba(255, 255, 255, 0.24);
  --frame-border-color-focus: rgba(139, 92, 246, 0.4);
  --frame-border-color-active: rgba(139, 92, 246, 0.5);
  --frame-bg: rgba(15, 15, 20, 0.6);
  --frame-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
  --frame-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.4);
  --frame-shadow-focus: 0 4px 16px rgba(139, 92, 246, 0.15), 0 2px 8px rgba(0, 0, 0, 0.35);
  --notch-size-sm: 10px;
  --notch-size-default: 18px;
  --notch-size-hero: 22px;
  --notch-edge-highlight: rgba(255, 255, 255, 0.06);
  --notch-edge-highlight-active: rgba(139, 92, 246, 0.6);
  --frame-transition-duration: 200ms;
  --frame-transition-easing: cubic-bezier(0.4, 0, 0.2, 1);

  /* Page background for notch cutout */
  --page-bg-rgb: 19, 19, 20;
}

/* ========================================================================
   MOBILE BLUR ADAPTATION - Responsive Device Tiers
   ======================================================================== */

/* Mobile: Leichtere Blur-Werte für bessere Performance */
@media (hover: none) and (pointer: coarse) {
  :root {
    --blur-aurora-mobile: 6px;
    --blur-aurora-heavy-mobile: 10px;
    --blur-neon-mobile: 4px;
  }
}

/* Desktop: Volle Blur-Werte */
@media (hover: hover) or (min-width: 768px) {
  :root {
    --blur-aurora-mobile: var(--blur-aurora-desktop);
    --blur-aurora-heavy-mobile: var(--blur-aurora-heavy-desktop);
    --blur-neon-mobile: var(--blur-neon-desktop);
  }
}

/* Reduced Effects (Low-Power Devices): Leicht aber sichtbar */
html[data-effects="reduced"]:not([data-reduced-motion="true"]) {
  --blur-aurora-mobile: 6px;
  --blur-aurora-heavy-mobile: 8px;
  --blur-neon-mobile: 4px;
}

/* Minimal (Accessibility Preference): Kein Blur */
html[data-reduced-motion="true"] {
  --blur-aurora-mobile: 0;
  --blur-aurora-heavy-mobile: 0;
  --blur-neon-mobile: 0;
}

@layer base {
  html,
  body {
    @apply bg-bg-app text-ink-primary font-sans antialiased selection:bg-brand-primary/30;
    overscroll-behavior: none; /* Prevent bounce on mobile */
  }

  /* Ambient Background Blobs - Using accent colors */
  body::before {
    content: "";
    position: fixed;
    top: -20%;
    left: -10%;
    width: clamp(260px, 48vw, 520px);
    height: clamp(260px, 48vw, 520px);
    background: radial-gradient(circle, var(--accent-chat-glow) 0%, rgba(0, 0, 0, 0) 70%);
    filter: blur(56px);
    z-index: -2;
    opacity: 0.55;
    pointer-events: none;
    will-change: transform;
    transform: translate3d(0, 0, 0);
    contain: paint;
    animation: disa-ambient-blob-a 18s var(--disa-ease-standard, ease-in-out) infinite alternate;
  }

  body::after {
    content: "";
    position: fixed;
    bottom: -20%;
    right: -10%;
    width: clamp(300px, 58vw, 640px);
    height: clamp(300px, 58vw, 640px);
    background: radial-gradient(circle, var(--accent-models-glow) 0%, rgba(0, 0, 0, 0) 70%);
    filter: blur(72px);
    z-index: -2;
    opacity: 0.5;
    pointer-events: none;
    will-change: transform;
    transform: translate3d(0, 0, 0);
    contain: paint;
    animation: disa-ambient-blob-b 22s var(--disa-ease-standard, ease-in-out) infinite alternate;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply text-ink-primary tracking-tight font-semibold;
  }
}

@layer components {
  /* ============================================================================
     DISA Notch - Signature Visual Primitive
     - Top-right notch (fixed)
     - Cutout uses --notch-cutout-bg (defaults to app background)
     - Edge highlight uses --notch-edge-color (defaults to --notch-edge-highlight)
     ========================================================================== */

  .disa-notch {
    position: relative;
    isolation: isolate;
    overflow: hidden;
    --notch-size: var(--notch-size-sm);
    --notch-cutout-bg: var(--bg-app);
    --notch-edge-color: var(--notch-edge-highlight);
  }

  .disa-notch::before {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: var(--notch-size);
    height: var(--notch-size);
    background: var(--notch-cutout-bg);
    border-bottom-left-radius: var(--frame-radius);
    pointer-events: none;
  }

  .disa-notch::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      linear-gradient(
        to bottom,
        transparent calc(var(--notch-size) - 1px),
        var(--notch-edge-color) calc(var(--notch-size) - 1px),
        var(--notch-edge-color)
      ),
      linear-gradient(
        to left,
        var(--notch-edge-color) 0,
        var(--notch-edge-color) 1px,
        transparent 1px
      );
    background-repeat: no-repeat;
    background-size:
      1px 100%,
      100% 1px;
    background-position:
      calc(100% - var(--notch-size)) top,
      right calc(100% - var(--notch-size));
  }

  .disa-notch--md {
    --notch-size: var(--notch-size-md);
  }

  .disa-notch--cutout-none::before {
    display: none;
  }

  .disa-notch--edge-none::after {
    display: none;
  }

  .disa-notch--interactive:hover {
    --notch-edge-color: var(--frame-border-color-hover);
  }

  .disa-notch--interactive:active {
    --notch-edge-color: var(--notch-edge-highlight-active);
  }

  .disa-notch--interactive:focus-visible,
  .disa-notch--interactive:focus-within {
    --notch-edge-color: var(--notch-edge-highlight-active);
  }

  /* ============================================================================
     PREMIUM DARK GLASS (Implementation)
     - Base class uses internal vars: --_glass-*
     - Layer classes set those vars
     - Legacy aliases remain (glass, glass-card) to avoid churn
     ========================================================================== */

  .glass-surface,
  .glass,
  .glass-card,
  .glass-1,
  .glass-2,
  .glass-3 {
    position: relative;
    isolation: isolate;
    background: var(--_glass-bg, var(--glass-bg-1));
    border: 1px solid var(--_glass-border, var(--glass-border-1));
    box-shadow: var(--_glass-shadow, var(--glass-shadow-1));
  }

  /* Premium edge highlight (top-left) */
  .glass-surface::before,
  .glass::before,
  .glass-card::before,
  .glass-1::before,
  .glass-2::before,
  .glass-3::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    background: linear-gradient(
      135deg,
      var(--_glass-edge, var(--glass-edge-highlight)) 0%,
      transparent 38%
    );
    opacity: 1;
  }

  /* Backdrop blur only when supported (premium glass performance + fallback) */
  @supports ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
    .glass-surface,
    .glass,
    .glass-card,
    .glass-1,
    .glass-2,
    .glass-3 {
      backdrop-filter: blur(var(--_glass-blur, var(--glass-blur-1)));
      /* stylelint-disable-next-line property-no-vendor-prefix */
      -webkit-backdrop-filter: blur(var(--_glass-blur, var(--glass-blur-1)));
    }
  }

  /* Layer definitions */
  .glass-1 {
    --_glass-bg: var(--glass-bg-1);
    --_glass-bg-hover: var(--glass-bg-1-hover);
    --_glass-border: var(--glass-border-1);
    --_glass-border-hover: var(--glass-border-1-hover);
    --_glass-shadow: var(--glass-shadow-1);
    --_glass-shadow-hover: var(--glass-shadow-1-hover);
    --_glass-blur: var(--glass-blur-1);
    --_glass-edge: var(--glass-edge-highlight);
  }

  .glass-2 {
    --_glass-bg: var(--glass-bg-2);
    --_glass-bg-hover: var(--glass-bg-2-hover);
    --_glass-border: var(--glass-border-2);
    --_glass-border-hover: var(--glass-border-2-hover);
    --_glass-shadow: var(--glass-shadow-2);
    --_glass-shadow-hover: var(--glass-shadow-2-hover);
    --_glass-blur: var(--glass-blur-2);
    --_glass-edge: var(--glass-edge-highlight-strong);
  }

  .glass-3 {
    --_glass-bg: var(--glass-bg-3);
    --_glass-bg-hover: var(--glass-bg-3-hover);
    --_glass-border: var(--glass-border-3);
    --_glass-border-hover: var(--glass-border-3-hover);
    --_glass-shadow: var(--glass-shadow-3);
    --_glass-shadow-hover: var(--glass-shadow-3-hover);
    --_glass-blur: var(--glass-blur-3);
    --_glass-edge: var(--glass-edge-highlight-strong);
  }

  /* Interactive premium behavior (reusable) */
  .glass-interactive {
    transition:
      background-color 180ms var(--disa-ease-standard, ease),
      border-color 180ms var(--disa-ease-standard, ease),
      box-shadow 180ms var(--disa-ease-standard, ease),
      transform 180ms var(--disa-ease-standard, ease);
    will-change: transform;
  }

  .glass-interactive:hover {
    background: var(--_glass-bg-hover, var(--_glass-bg, var(--glass-bg-1)));
    border-color: var(--_glass-border-hover, var(--_glass-border, var(--glass-border-1)));
    box-shadow: var(--_glass-shadow-hover, var(--_glass-shadow, var(--glass-shadow-1)));
    transform: translateY(-1px);
  }

  .glass-interactive:active {
    transform: translateY(0);
  }

  .glass-interactive:focus-visible,
  .glass-interactive:focus-within {
    outline: none;
    border-color: var(--glass-focus-ring);
    box-shadow:
      0 0 0 1px var(--glass-focus-ring),
      var(--_glass-shadow, var(--glass-shadow-1));
  }

  /* Legacy aliases (keep existing class names working) */
  .glass {
    --_glass-bg: var(--glass-bg-2);
    --_glass-bg-hover: var(--glass-bg-2-hover);
    --_glass-border: var(--glass-border-2);
    --_glass-border-hover: var(--glass-border-2-hover);
    --_glass-shadow: var(--glass-shadow-2);
    --_glass-shadow-hover: var(--glass-shadow-2-hover);
    --_glass-blur: var(--glass-blur-2);
    --_glass-edge: var(--glass-edge-highlight-strong);
  }

  .glass-card {
    --_glass-bg: var(--glass-bg-1);
    --_glass-bg-hover: var(--glass-bg-1-hover);
    --_glass-border: var(--glass-border-1);
    --_glass-border-hover: var(--glass-border-1-hover);
    --_glass-shadow: var(--glass-shadow-1);
    --_glass-shadow-hover: var(--glass-shadow-1-hover);
    --_glass-blur: var(--glass-blur-1);
    --_glass-edge: var(--glass-edge-highlight);
    border-radius: 1rem; /* rounded-2xl */
  }

  .card-base {
    @apply bg-surface-1 border border-white/5 rounded-2xl shadow-sm;
  }

  .input-base {
    @apply bg-surface-2 border border-white/10 rounded-xl px-4 py-3 text-ink-primary placeholder:text-ink-tertiary focus:outline-none focus:ring-2 focus:ring-brand-primary/50 transition-all shadow-inner;
  }

  .mask-linear-fade {
    mask-image: linear-gradient(
      to right,
      transparent,
      black 12px,
      black calc(100% - 12px),
      transparent
    );
    -webkit-mask-image: linear-gradient(
      to right,
      transparent,
      black 12px,
      black calc(100% - 12px),
      transparent
    );
  }

  /* ============================================================================
     DEVICE-ADAPTIVE BLUR UTILITIES - für AnimatedBrandmark
     Nutzt CSS-Variablen die basierend auf Gerät/Accessibility angepasst werden
     ========================================================================== */

  .aurora-blur {
    filter: blur(var(--blur-aurora-mobile));
  }

  .aurora-blur-heavy {
    filter: blur(var(--blur-aurora-heavy-mobile));
  }

  .neon-blur {
    filter: blur(var(--blur-neon-mobile));
  }
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-surface-3/50 rounded-full hover:bg-surface-3 transition-colors;
}

/* ============================================================================
   PHONE FRAME - Mobile UI on Desktop
   Forces mobile viewport on all screen sizes (390-430px centered)
   ============================================================================ */

.phone-frame-wrapper {
  /* Background for "outside" the phone frame on desktop */
  background: var(--bg-app);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100dvh;
  min-height: calc(var(--vh, 1vh) * 100);
  overflow-x: hidden;
}

.phone-frame-content {
  /* Centered mobile viewport container */
  width: 100%;
  max-width: 430px; /* iPhone 14 Pro Max width */
  height: 100dvh;
  height: calc(var(--vh, 1vh) * 100);
  min-height: 100dvh;
  min-height: calc(var(--vh, 1vh) * 100);
  background: var(--bg-app);
  background-image: var(--chalk-noise);
  position: relative;
  /* Subtle shadow on desktop to enhance "phone" feeling */
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05);
  /* Prevent double scroll; inner containers handle scrolling */
  overflow: hidden;
}

/* Branding Animations */
@layer utilities {
  /* Ambient blobs: GPU-friendly transform-only motion */
  @keyframes disa-ambient-blob-a {
    0% {
      transform: translate3d(0, 0, 0) scale(1);
    }
    100% {
      transform: translate3d(6%, 4%, 0) scale(1.08);
    }
  }

  @keyframes disa-ambient-blob-b {
    0% {
      transform: translate3d(0, 0, 0) scale(1);
    }
    100% {
      transform: translate3d(-5%, -6%, 0) scale(1.1);
    }
  }

  /* Slow pulse for ambient glow */
  @keyframes pulse-slow {
    0%,
    100% {
      opacity: 0.6;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.05);
    }
  }

  .animate-pulse-slow {
    animation: pulse-slow 4s ease-in-out infinite;
  }

  /* Gradient shift for dynamic color effect */
  @keyframes gradient-shift {
    0%,
    100% {
      filter: hue-rotate(0deg) brightness(1);
    }
    50% {
      filter: hue-rotate(10deg) brightness(1.1);
    }
  }

  .animate-gradient-shift {
    animation: gradient-shift 6s ease-in-out infinite;
  }

  /* Subtle pulse for accent elements */
  @keyframes pulse-subtle {
    0%,
    100% {
      opacity: 0.8;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.1);
    }
  }

  .animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
  }

  /* Subtle bounce for decorative elements */
  @keyframes bounce-subtle {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-4px);
    }
  }

  .animate-bounce-subtle {
    animation: bounce-subtle 3s ease-in-out infinite;
  }

  /* Text shimmer effect */
  @keyframes text-shimmer {
    0% {
      background-position: -100% 0;
    }
    100% {
      background-position: 100% 0;
    }
  }

  /* stylelint-disable @stylistic/number-leading-zero, @stylistic/number-no-trailing-zeros */
  .animate-text-shimmer {
    background: linear-gradient(
      90deg,
      currentColor 0%,
      theme(colors.violet.400) 50%,
      currentColor 100%
    );
    /* stylelint-enable @stylistic/number-leading-zero, @stylistic/number-no-trailing-zeros */
    background-size: 200% auto;
    background-clip: text;
    -webkit-background-clip: text;
    /* stylelint-disable-next-line property-no-vendor-prefix */
    -webkit-text-fill-color: transparent;
    animation: text-shimmer 3s linear infinite;
  }

  /* Fade-in with scale */
  @keyframes fade-in-scale {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-fade-in-scale {
    animation: fade-in-scale 0.6s ease-out;
  }

  /* Wordmark intro animation - plays once on load */
  @keyframes wordmark-intro {
    0% {
      opacity: 0;
      transform: translateY(8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-wordmark-intro {
    animation: wordmark-intro 450ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* Staggered wordmark intro for child elements */
  .animate-wordmark-intro-delay-1 {
    animation: wordmark-intro 450ms cubic-bezier(0.16, 1, 0.3, 1) 100ms forwards;
    opacity: 0;
  }

  .animate-wordmark-intro-delay-2 {
    animation: wordmark-intro 450ms cubic-bezier(0.16, 1, 0.3, 1) 200ms forwards;
    opacity: 0;
  }

  /* Brand animations - subtle, premium feel */

  /* Breathing effect - very subtle scale + float */
  @keyframes brand-breathe {
    0%,
    100% {
      transform: translateY(0) scale(1);
    }
    50% {
      transform: translateY(-1.5px) scale(1.008);
    }
  }

  .animate-brand-breathe {
    animation: brand-breathe 8s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
    will-change: transform;
  }

  /* Shimmer effect - turquoise sweep across text */
  @keyframes brand-shimmer {
    0% {
      background-position: -100% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  .animate-brand-shimmer {
    animation: brand-shimmer 12s linear infinite;
  }

  /* Shimmer delayed - for second word */
  .animate-brand-shimmer-delayed {
    animation: brand-shimmer 12s linear infinite;
    animation-delay: 2s;
  }

  /* Subtle glow pulse */
  @keyframes brand-glow {
    0%,
    100% {
      opacity: 0;
    }
    50% {
      opacity: 0.15;
    }
  }

  .animate-brand-glow {
    animation: brand-glow 10s ease-in-out infinite;
  }

  /* Aurora glow blobs – soft drifting violet/cyan light behind brandmark */
  @keyframes aurora-drift-a {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.22;
    }
    33% {
      transform: translate(-10px, -7px) scale(1.08);
      opacity: 0.3;
    }
    66% {
      transform: translate(7px, 5px) scale(0.94);
      opacity: 0.16;
    }
  }

  @keyframes aurora-drift-b {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.18;
    }
    40% {
      transform: translate(9px, 5px) scale(1.06);
      opacity: 0.26;
    }
    70% {
      transform: translate(-7px, -9px) scale(0.96);
      opacity: 0.13;
    }
  }

  .animate-aurora-a {
    animation: aurora-drift-a 14s ease-in-out infinite;
    will-change: transform, opacity;
  }

  .animate-aurora-b {
    animation: aurora-drift-b 18s ease-in-out infinite;
    animation-delay: -5s;
    will-change: transform, opacity;
  }

  /* Word-reveal: blur clears as word slides up – staggered per word */
  @keyframes word-reveal {
    0% {
      opacity: 0;
      transform: translateY(12px);
      filter: blur(10px);
    }
    60% {
      opacity: 1;
      transform: translateY(-2px);
      filter: blur(0);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }
  }

  .animate-word-reveal {
    animation: word-reveal 700ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    will-change: transform, opacity, filter;
  }

  .animate-word-reveal-delayed {
    animation: word-reveal 700ms cubic-bezier(0.16, 1, 0.3, 1) 200ms forwards;
    opacity: 0;
    will-change: transform, opacity, filter;
  }

  /* Neon-Glow pulse behind logo text */
  @keyframes logo-neon-pulse {
    0%,
    100% {
      opacity: 0.05;
      transform: scale(1);
    }
    50% {
      opacity: 0.18;
      transform: scale(1.06);
    }
  }

  .animate-logo-neon-pulse {
    animation: logo-neon-pulse 4s ease-in-out infinite;
    will-change: opacity, transform;
  }

  /* Shimmer gradient for "Disa" – violet sweep */
  .logo-text-shimmer-disa {
    background: linear-gradient(
      90deg,
      rgba(139, 92, 246, 1) 0%,
      rgba(167, 139, 250, 1) 35%,
      rgba(255, 255, 255, 0.7) 50%,
      rgba(139, 92, 246, 1) 65%,
      rgba(124, 58, 237, 1) 100%
    );
    background-size: 300% 100%;
    background-clip: text;
    /* stylelint-disable-next-line property-no-vendor-prefix */
    -webkit-background-clip: text;
    color: transparent;
    animation: brand-shimmer 12s linear infinite;
    will-change: background-position;
  }

  /* Shimmer gradient for "AI" – violet-to-cyan sweep */
  .logo-text-shimmer-ai {
    background: linear-gradient(
      90deg,
      rgba(139, 92, 246, 1) 0%,
      rgba(56, 189, 248, 1) 35%,
      rgba(255, 255, 255, 0.75) 50%,
      rgba(56, 189, 248, 1) 65%,
      rgba(6, 182, 212, 1) 100%
    );
    background-size: 300% 100%;
    background-clip: text;
    /* stylelint-disable-next-line property-no-vendor-prefix */
    -webkit-background-clip: text;
    color: transparent;
    animation: brand-shimmer 12s linear 2s infinite;
    will-change: background-position;
  }

  /* ============================================================================
     ACCESSIBILITY: Reduced Motion - Text bleibt IMMER sichtbar
     Animationen werden statisch, aber Opacity wird NIE unter 0.9 gesetzt
     ========================================================================== */
  @media (prefers-reduced-motion: reduce) {
    /* Ambient blobs: statisch aber als Umgebungslicht sichtbar */
    body::before,
    body::after {
      animation: none !important;
      filter: blur(36px);
      opacity: 0.35;
      transform: none !important;
      will-change: auto;
    }

    /* Aurora blobs: statisch aber sichtbar als Ambient-Licht */
    .animate-aurora-a,
    .animate-aurora-b {
      animation: none !important;
      opacity: 0.15 !important; /* Sichtbar als Hintergrund-Glow */
      transform: none !important;
    }

    /* Glow/Pulse-Effekte: statisch aber sichtbar */
    .animate-logo-neon-pulse,
    .animate-brand-glow {
      animation: none !important;
      opacity: 0.1 !important; /* Leichter statischer Glow */
      transform: none !important;
    }

    /* Dekorative Animationen: deaktiviert */
    .animate-wordmark-intro,
    .animate-wordmark-intro-delay-1,
    .animate-wordmark-intro-delay-2,
    .animate-pulse-slow,
    .animate-gradient-shift,
    .animate-pulse-subtle,
    .animate-bounce-subtle,
    .animate-text-shimmer,
    .animate-fade-in-scale,
    .animate-brand-breathe,
    .animate-brand-shimmer,
    .animate-brand-shimmer-delayed {
      animation: none !important;
      transform: none !important;
    }

    /* Logo-Text: IMMER voll sichtbar - KRITISCH! */
    .animate-word-reveal,
    .animate-word-reveal-delayed {
      animation: none !important;
      opacity: 1 !important; /* ✅ Text niemals unsichtbar */
      transform: none !important;
      filter: none !important;
    }

    /* Shimmer-Gradient: statische Position (zentriert) */
    .logo-text-shimmer-disa,
    .logo-text-shimmer-ai {
      animation: none !important;
      background-position: 50% 0; /* Zentriert statt -100% */
    }
  }

  /* Low-power / low-data: keep ambience but avoid continuous motion */
  @media (prefers-reduced-data: reduce) {
    body::before,
    body::after {
      animation: none !important;
      filter: blur(40px);
      opacity: 0.32;
      transform: none !important;
      will-change: auto;
    }
  }

  html[data-effects="reduced"] body::before,
  html[data-effects="reduced"] body::after {
    animation: none !important;
    filter: blur(40px);
    opacity: 0.32;
    transform: none !important;
    will-change: auto;
  }
}

/* Brand Card primitive with tint overlay
   NOTE: Legacy system for BrandCard.tsx (UnifiedInputBar)
   Will be migrated to unified Card.tsx system in future refactor */
@layer components {
  .brand-card {
    position: relative;
    isolation: isolate;
    overflow: hidden;
    --card-notch-size: var(--notch-size-md);
    --card-edge-highlight: rgba(
      255,
      255,
      255,
      0.24
    ); /* Increased from var(--notch-edge-highlight) for visibility */
    border-radius: var(--card-radius);
    border: var(--card-border-width) solid var(--card-border-color);
    background: var(--card-bg);
    box-shadow: var(--card-shadow);
    transition:
      border-color var(--frame-transition-duration) var(--frame-transition-easing),
      box-shadow var(--frame-transition-duration) var(--frame-transition-easing),
      transform var(--frame-transition-duration) var(--frame-transition-easing);
  }

  .brand-card::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(
      var(--tint-angle),
      rgba(var(--card-tint-rgb, var(--tint-color-rgb-default)), var(--card-tint-alpha, 0)) 0%,
      rgba(6, 7, 10, 0) var(--tint-fade-x)
    );
    opacity: 1;
  }

  .brand-card::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    /* Dual gradient system for notch edges:
       1. Vertical edge (left of notch) - visible in idle state
       2. Horizontal edge (bottom of notch) - visible in idle state */
    background:
      linear-gradient(
        to bottom,
        transparent calc(var(--card-notch-size) - 1px),
        var(--card-edge-highlight) calc(var(--card-notch-size) - 1px),
        var(--card-edge-highlight)
      ),
      linear-gradient(
        to left,
        var(--card-edge-highlight) 0,
        var(--card-edge-highlight) 1px,
        transparent 1px
      );
    background-repeat: no-repeat;
    background-size:
      1px 100%,
      100% 1px;
    background-position:
      calc(100% - var(--card-notch-size)) top,
      right calc(100% - var(--card-notch-size));
  }

  .brand-card--plain {
    --card-tint-alpha: 0;
  }

  .brand-card--tinted {
    --card-tint-alpha: var(--tint-alpha-soft);
  }

  .brand-card--role {
    --card-tint-alpha: var(--tint-alpha-strong);
  }

  .brand-card--interactive {
    cursor: pointer;
  }

  .brand-card--interactive:hover {
    --card-edge-highlight: var(--frame-border-color-hover);
    border-color: var(--card-border-color-hover);
    box-shadow: var(--card-shadow-hover);
    transform: translateY(-1px);
  }

  .brand-card--interactive:active {
    --card-edge-highlight: var(--notch-edge-highlight-active);
    transform: translateY(1px);
    box-shadow: var(--card-shadow-pressed);
  }

  .brand-card:focus-visible,
  .brand-card:focus-within {
    --card-edge-highlight: var(--notch-edge-highlight-active);
    outline: none;
    border-color: var(--card-border-color-focus);
    box-shadow: var(--card-shadow-focus);
  }

  @media (max-width: 640px) {
    .brand-card {
      --card-notch-size: var(--notch-size-sm);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .brand-card,
    .brand-card--interactive:hover,
    .brand-card--interactive:active {
      transform: none !important;
      transition:
        border-color 150ms ease,
        box-shadow 150ms ease;
    }
  }
}
