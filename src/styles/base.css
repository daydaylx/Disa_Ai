@import "tailwindcss/base";
@import "tailwindcss/components";
@import "tailwindcss/utilities";

/* ====== Design Tokens (Dark-first) ====== */
:root,
:root[data-ui-theme="dark"] {
  --bg: 10 14 20;
  --surface: 18 22 30;
  --overlay: 255 255 255;

  --primary: 147 197 253; /* sky-300 */
  --accent: 196 181 253; /* violet-300 */
  --success: 34 197 94;
  --warning: 245 158 11;
  --danger: 239 68 68;
  --muted: 148 163 184;
  --ring: 168 85 247;

  --text-primary: 248 250 252;
  --text-secondary: 214 222 234;
  --text-muted: 172 182 199;

  --glass-surface-rgb: 255 255 255;
  --glass-border-rgb: 255 255 255;
  --glass-highlight-rgb: 168 85 247;
  --glass-backdrop-blur: var(--glass-blur-md);
  --glass-backdrop-blur-strong: var(--glass-blur-xl);
  --glass-backdrop-saturation: 160%;
  --glass-backdrop-brightness: 108%;
  --glass-shadow-soft: 0 12px 32px -20px rgba(5, 11, 20, 0.45);
  --glass-shadow: 0 24px 60px -28px rgba(5, 11, 20, 0.6);

  --accent-teal-rgb: 34 211 238;
  --accent-violet-rgb: 168 85 247;
  --accent-pink-rgb: 255 77 139;

  --radius: 12px;

  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
  --safe-left: env(safe-area-inset-left);
  --safe-right: env(safe-area-inset-right);

  --bottom-nav-h: 64px;
}

:root[data-ui-theme="dark-glass"] {
  --bg: var(--color-darkglass-bg-rgb);
  --surface: var(--color-darkglass-surface-rgb);
  --overlay: 224 224 224;

  --primary: var(--color-darkglass-accent-teal-rgb);
  --accent: var(--color-darkglass-accent-violet-rgb);
  --muted: 154 160 166;
  --ring: var(--color-darkglass-accent-violet-rgb);

  --text-primary: var(--color-darkglass-text-primary-rgb);
  --text-secondary: 184 190 196;
  --text-muted: 154 160 166;

  --glass-surface-rgb: 255 255 255;
  --glass-border-rgb: 255 255 255;
  --glass-highlight-rgb: var(--color-darkglass-accent-teal-rgb);
  --glass-backdrop-blur: var(--glass-blur-lg);
  --glass-backdrop-blur-strong: var(--glass-blur-2xl);
  --glass-backdrop-saturation: 175%;
  --glass-backdrop-brightness: 112%;
  --glass-shadow-soft: var(--color-darkglass-shadow-soft);
  --glass-shadow: var(--color-darkglass-shadow);

  --accent-teal-rgb: var(--color-darkglass-accent-teal-rgb);
  --accent-violet-rgb: var(--color-darkglass-accent-violet-rgb);
  --accent-pink-rgb: var(--color-darkglass-accent-pink-rgb);
}

html,
body,
#root {
  height: 100%;
}
body {
  font-family: "Inter", sans-serif;
  background-color: rgb(var(--bg));
  color: rgb(var(--text-primary));
  -webkit-font-smoothing: antialiased;
  -webkit-tap-highlight-color: transparent;
}

@layer base {
  * {
    border-color: rgb(var(--ring) / 0.15);
  }
}

@layer utilities {
  .glass {
    background-color: rgb(var(--glass-surface-rgb) / 0.12);
    border: 1px solid rgb(var(--glass-border-rgb) / 0.25);
    backdrop-filter: blur(8px) saturate(150%) brightness(105%);
    -webkit-backdrop-filter: blur(8px) saturate(150%) brightness(105%);
    box-shadow: var(--glass-shadow-soft);
    transition:
      background-color 120ms ease,
      border-color 120ms ease;
  }
  /* Leselänge ~72 Zeichen */
  .max-measure {
    max-width: 72ch;
  }
  .ring-focus {
    outline: none;
    box-shadow:
      0 0 0 2px rgb(var(--bg)),
      0 0 0 4px rgb(var(--ring));
  }
  .safe-px {
    padding-left: max(16px, var(--safe-left));
    padding-right: max(16px, var(--safe-right));
  }
  .safe-pb {
    padding-bottom: max(16px, var(--safe-bottom));
  }
  .safe-pt {
    padding-top: max(8px, var(--safe-top));
  }
  /* Platz für Bottom-Nav */
  .with-bottomnav {
    padding-bottom: calc(max(16px, var(--safe-bottom)) + var(--bottom-nav-h));
  }
  /* Screen Reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}

/* Typografie & Code */
code,
pre,
kbd,
samp {
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "DejaVu Sans Mono",
    monospace;
}
code {
  font-size: 0.95em;
}
pre {
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Fokus sichtbar */
:focus-visible {
  outline: 2px solid rgb(var(--ring));
  outline-offset: 2px;
}

/* Respektiere Motion-Preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Scrollbars dezent */
*::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
*::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.12);
  border-radius: 8px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
