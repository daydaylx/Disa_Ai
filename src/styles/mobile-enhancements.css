/**
 * Mobile Enhancement CSS - Modern Mobile Optimizations
 * Adds final touches for premium mobile experience
 */

/* Modern Mobile Viewport Handling */
:root {
  /* Touch enhancement variables */
  --touch-callout: none; /* iOS touch callout */
  --user-select: none; /* Text selection prevention */
  --tap-highlight-color: transparent; /* Tap highlight removal */
}

/* Fix for iOS Safari address bar height changes - Override from tokens.css */
@supports (height: 100dvh) {
  :root {
    --vh: 1dvh; /* Use dynamic viewport height when supported */
  }
}

/* Disable text selection on UI elements */
.no-select {
  -webkit-touch-callout: var(--touch-callout);
  -webkit-user-select: var(--user-select);
  -moz-user-select: var(--user-select);
  -ms-user-select: var(--user-select);
  user-select: var(--user-select);
}

/* Remove tap highlights on interactive elements */
.no-tap-highlight {
  -webkit-tap-highlight-color: var(--tap-highlight-color);
  tap-highlight-color: var(--tap-highlight-color);
}

/* Modern touch target sizing - using semantic variables */
.touch-target {
  min-height: var(--size-touch-comfortable, 48px);
  min-width: var(--size-touch-comfortable, 48px);
  touch-action: manipulation;
  cursor: pointer;
}

.touch-target-large {
  min-height: var(--size-touch-relaxed, 56px);
  min-width: var(--size-touch-relaxed, 56px);
}

/* Safe area padding utilities */
.safe-padding-top {
  padding-top: var(--safe-area-top);
}

.safe-padding-bottom {
  padding-bottom: var(--safe-area-bottom);
}

.safe-padding-left {
  padding-left: var(--safe-area-left);
}

.safe-padding-right {
  padding-right: var(--safe-area-right);
}

.safe-padding {
  padding-top: var(--safe-area-top);
  padding-right: var(--safe-area-right);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
}

/* Full viewport height with safe areas */
.vh-full-safe {
  height: calc(100vh - var(--safe-area-top) - var(--safe-area-bottom));
  height: calc(100 * var(--vh) - var(--safe-area-top) - var(--safe-area-bottom));
}

/* Prevent zoom on input focus (iOS) */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="tel"],
input[type="url"],
input[type="search"],
textarea,
select {
  font-size: 16px; /* Prevents zoom on iOS Safari */
}

/* Smooth momentum scrolling */
.momentum-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* iOS style bounce scrolling */
.ios-bounce-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: auto;
}

/* Android style edge glow scrolling */
.android-scroll {
  overscroll-behavior: contain;
}

/* Pull-to-refresh container styling */
.pull-to-refresh-container {
  position: relative;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: none; /* Prevents browser pull-to-refresh */
}

/* Disable double-tap zoom */
.no-double-tap-zoom {
  touch-action: manipulation;
}

/* High contrast mode enhancements */
@media (prefers-contrast: high) {
  .touch-target:focus,
  .touch-target:focus-visible {
    outline: 3px solid currentColor;
    outline-offset: 2px;
  }

  .tap-target:focus,
  .tap-target:focus-visible {
    outline: 3px solid var(--accent, currentColor);
    outline-offset: 2px;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .pull-to-refresh-indicator,
  .touch-feedback,
  .haptic-feedback {
    animation: none !important;
    transition: none !important;
  }
}

/* Dark mode specific touch enhancements */
@media (prefers-color-scheme: dark) {
  :root {
    --tap-highlight-color: rgba(255, 255, 255, 0.1);
  }
}

/* Light mode specific touch enhancements */
@media (prefers-color-scheme: light) {
  :root {
    --tap-highlight-color: rgba(0, 0, 0, 0.1);
  }
}

/* Landscape orientation optimizations */
@media (orientation: landscape) and (max-height: 600px) {
  .mobile-header {
    height: calc(var(--header-height, 60px) - 8px);
  }

  .mobile-bottom-nav {
    height: calc(var(--bottom-nav-height, 60px) - 8px);
  }
}

/* Notch and Dynamic Island support */
@supports (padding: max(0px)) {
  .safe-area-aware {
    padding-left: max(var(--safe-area-left), 16px);
    padding-right: max(var(--safe-area-right), 16px);
  }

  .safe-header {
    padding-top: max(var(--safe-area-top), 16px);
  }

  .safe-footer {
    padding-bottom: max(var(--safe-area-bottom), 16px);
  }
}

/* Foldable device support */
@media (spanning: single-fold-vertical) {
  .adaptive-layout {
    flex-direction: row;
  }
}

@media (spanning: single-fold-horizontal) {
  .adaptive-layout {
    flex-direction: column;
  }
}

/* High refresh rate display optimization */
@media (update: fast) {
  .smooth-animation {
    will-change: transform, opacity;
  }
}

/* Pointer-based interaction enhancements */
@media (pointer: coarse) {
  /* Touch-based devices */
  .touch-target {
    padding: 8px;
  }

  .interactive-element:hover {
    /* Disable hover effects on touch devices */
    background-color: initial;
  }
}

@media (pointer: fine) {
  /* Mouse/trackpad devices */
  .touch-target {
    padding: 4px;
  }
}

/* Print optimizations for mobile */
@media print {
  .mobile-only,
  .touch-target,
  .pull-to-refresh-container {
    display: none !important;
  }
}

/* Accessibility enhancements for mobile screen readers */
@media (prefers-reduced-motion: no-preference) {
  .scroll-smooth {
    scroll-behavior: smooth;
  }
}

/* Focus management for mobile accessibility */
.mobile-focus-visible:focus-visible {
  outline: 2px solid var(--accent, #007aff);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Touch feedback animations */
@keyframes touchFeedback {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(0.95);
    opacity: 0.8;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.touch-feedback:active {
  animation: touchFeedback 150ms ease-out;
}

/* Modern iOS/Android button styles */
.ios-button {
  border-radius: 12px;
  padding: 12px 24px;
  background: var(--ios-blue, #007aff);
  color: white;
  border: none;
  font-weight: 600;
  touch-action: manipulation;
}

.android-button {
  border-radius: 4px;
  padding: 12px 24px;
  background: var(--material-primary, #1976d2);
  color: white;
  border: none;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  touch-action: manipulation;
}

/* App-like full-screen experience */
.app-fullscreen {
  height: 100vh;
  height: calc(100 * var(--vh));
  overflow: hidden;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

/* Status bar styling for PWA */
.status-bar-safe {
  padding-top: var(--safe-area-top);
  background: var(--bg0, #000);
  position: relative;
  z-index: 1000;
}
