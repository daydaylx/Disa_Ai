/**
 * PERFORMANCE-OPTIMIZED GLASSMORPHISM SYSTEM
 *
 * Mobile-First Design mit 60fps Performance-Budget
 * Reduziert Blur-Stärke, nutzt alternative Techniken für Tiefe
 *
 * PERFORMANCE-BUDGET:
 * - Mobile: Max 4px blur (critical path: 0-2px)
 * - Desktop: Max 8px blur
 * - Regel: Eine Backdrop-Schicht pro Element
 * - Alternative: Borders, Highlights, Schatten für Tiefe
 */

:root {
  /* === PERFORMANCE-OPTIMIERTE BLUR-WERTE === */

  /* CRITICAL PATH: Navigation, Chat-Input (0-2px für 60fps) */
  --glass-blur-none: blur(0px);
  --glass-blur-critical: blur(2px);

  /* MOBILE-OPTIMIERT: Cards, Modals (4px max) */
  --glass-blur-mobile: blur(4px);
  --glass-blur-mobile-subtle: blur(2px);

  /* DESKTOP: Nur bei genügend GPU-Power (8px max) */
  --glass-blur-desktop: blur(6px);
  --glass-blur-desktop-strong: blur(8px);

  /* === ALTERNATIVE TIEFE-TECHNIKEN === */

  /* Dünne Innen-Borders für Glaseffekt */
  --glass-inner-border: inset 0 1px 0 rgba(255, 255, 255, 0.15);
  --glass-inner-border-strong: inset 0 1px 0 rgba(255, 255, 255, 0.25);

  /* Subtile Highlights für Tiefe */
  --glass-highlight-top: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 2px rgba(0, 0, 0, 0.1);

  --glass-highlight-sophisticated:
    inset 0 1px 0 rgba(255, 255, 255, 0.12), inset 0 -1px 0 rgba(0, 0, 0, 0.05),
    0 2px 4px rgba(0, 0, 0, 0.08);

  /* === PERFORMANCE-SURFACES === */

  /* Critical Path: Navigation (keine Backdrop-Filter) */
  --glass-nav-surface: rgba(18, 20, 24, 0.98);
  --glass-nav-border: rgba(255, 255, 255, 0.08);

  /* Mobile Cards: Minimaler Blur */
  --glass-card-surface: rgba(16, 18, 22, 0.94);
  --glass-card-border: rgba(255, 255, 255, 0.12);

  /* Modals: Moderate Blur für Desktop */
  --glass-modal-surface: rgba(15, 17, 21, 0.96);
  --glass-modal-border: rgba(255, 255, 255, 0.18);

  /* === SCHATTEN FÜR TIEFE (statt Blur) === */

  /* Ersetzt starke Blur-Effekte */
  --glass-depth-light: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);

  --glass-depth-medium: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);

  --glass-depth-strong: 0 10px 15px rgba(0, 0, 0, 0.15), 0 4px 6px rgba(0, 0, 0, 0.1);

  /* === RESPONSIVE BLUR-ASSIGNMENTS === */

  /* Basis: Mobile-optimiert */
  --glass-blur-responsive: var(--glass-blur-mobile);
  --glass-blur-subtle-responsive: var(--glass-blur-mobile-subtle);

  /* Navigation: Immer performance-kritisch */
  --glass-blur-nav: var(--glass-blur-critical);

  /* Chat: Performance-kritisch beim Scrollen */
  --glass-blur-chat: var(--glass-blur-critical);
}

/* === RESPONSIVE BLUR-ENHANCEMENT === */

/* Desktop: Mehr GPU-Power verfügbar */
@media (min-width: 768px) and (hover: hover) {
  :root {
    --glass-blur-responsive: var(--glass-blur-desktop);
    --glass-blur-subtle-responsive: var(--glass-blur-mobile);

    /* Navigation bleibt performance-kritisch */
    --glass-blur-nav: var(--glass-blur-mobile-subtle);
    --glass-blur-chat: var(--glass-blur-mobile-subtle);
  }
}

/* High-End Desktop: GPU kann mehr */
@media (min-width: 1200px) and (hover: hover) {
  :root {
    --glass-blur-responsive: var(--glass-blur-desktop-strong);
  }
}

/* Performance-Mode: User bevorzugt reduzierte Bewegung */
@media (prefers-reduced-motion: reduce) {
  :root {
    --glass-blur-responsive: var(--glass-blur-none);
    --glass-blur-subtle-responsive: var(--glass-blur-none);
    --glass-blur-nav: var(--glass-blur-none);
    --glass-blur-chat: var(--glass-blur-none);
  }
}

/* === PERFORMANCE-OPTIMIERTE UTILITY-KLASSEN === */

/* CRITICAL PATH: Für Navigation, Chat-Input */
.glass-critical {
  background: var(--glass-nav-surface);
  border: 1px solid var(--glass-nav-border);
  backdrop-filter: var(--glass-blur-nav);
  -webkit-backdrop-filter: var(--glass-blur-nav);
  box-shadow: var(--glass-inner-border), var(--glass-depth-light);
}

/* MOBILE-OPTIMIERT: Für Cards, Panels */
.glass-mobile {
  background: var(--glass-card-surface);
  border: 1px solid var(--glass-card-border);
  backdrop-filter: var(--glass-blur-responsive);
  -webkit-backdrop-filter: var(--glass-blur-responsive);
  box-shadow: var(--glass-highlight-top);
}

/* SUBTLE: Für verschachtelte Elemente (ohne Backdrop-Filter) */
.glass-subtle {
  background: var(--glass-card-surface);
  border: 1px solid var(--glass-card-border);
  /* KEIN backdrop-filter - nutzt nur Border/Shadow für Tiefe */
  box-shadow: var(--glass-inner-border-strong), var(--glass-depth-medium);
}

/* MODAL: Für Overlays und Dialoge */
.glass-modal {
  background: var(--glass-modal-surface);
  border: 1px solid var(--glass-modal-border);
  backdrop-filter: var(--glass-blur-subtle-responsive);
  -webkit-backdrop-filter: var(--glass-blur-subtle-responsive);
  box-shadow: var(--glass-highlight-sophisticated);
}

/* FALLBACK: Ohne Backdrop-Filter für Performance */
.glass-fallback {
  background: var(--glass-nav-surface);
  border: 1px solid var(--glass-nav-border);
  /* KEIN backdrop-filter */
  box-shadow: var(--glass-inner-border-strong), var(--glass-depth-strong);
}

/* === SPEZIELLE PERFORMANCE-KLASSEN === */

/* Für scrollende Container: Minimal blur */
.glass-scrollable {
  background: var(--glass-nav-surface);
  border: 1px solid var(--glass-nav-border);
  backdrop-filter: var(--glass-blur-critical);
  -webkit-backdrop-filter: var(--glass-blur-critical);
  box-shadow: var(--glass-depth-light);

  /* Optimierung: GPU-Layer forcieren für smooth scrolling */
  will-change: transform;
  transform: translateZ(0);
}

/* Für hover states: Alternative zu backdrop-filter */
.glass-hover-effect {
  position: relative;
}

.glass-hover-effect::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--glass-highlight-top);
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

.glass-hover-effect:hover::before {
  opacity: 1;
}

/* === ALTERNATIVE TIEFE-TECHNIKEN === */

/* Border-basierte Glaseffekte */
.glass-border-effect {
  background: var(--glass-card-surface);
  border: 1px solid var(--glass-card-border);
  position: relative;
}

.glass-border-effect::before {
  content: "";
  position: absolute;
  inset: 1px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: inherit;
  pointer-events: none;
}

/* Gradient-basierte Alternative */
.glass-gradient-effect {
  background:
    linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%, rgba(0, 0, 0, 0.05) 100%),
    var(--glass-card-surface);
  border: 1px solid var(--glass-card-border);
}

/* === DEBUGGING & MONITORING === */

/* Performance-Monitor: Zeigt aktuelle Blur-Werte */
.glass-debug::after {
  content: "Blur: " attr(data-blur-level);
  position: absolute;
  top: 4px;
  right: 4px;
  background: rgba(255, 0, 0, 0.8);
  color: white;
  padding: 2px 4px;
  font-size: 10px;
  border-radius: 2px;
  pointer-events: none;
  z-index: 9999;
}

/* FPS-Warning bei kritischen Elementen */
@media (max-width: 767px) {
  .glass-performance-warning {
    /* Ersetzt backdrop-filter mit Schatten */
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    box-shadow: var(--glass-depth-strong) !important;
  }
}

/* === MIGRATION HELPERS === */

/* Ersetzt alte .glass-panel Klasse */
.glass-panel-v2 {
  background: var(--glass-modal-surface);
  border: 1px solid var(--glass-modal-border);
  backdrop-filter: var(--glass-blur-subtle-responsive);
  -webkit-backdrop-filter: var(--glass-blur-subtle-responsive);
  box-shadow: var(--glass-highlight-sophisticated);
}

/* Ersetzt alte Card-Glass-Varianten mit Performance-Optimierung */
.card-glass-performance {
  background: var(--glass-card-surface);
  border: 1px solid var(--glass-card-border);
  backdrop-filter: var(--glass-blur-mobile);
  -webkit-backdrop-filter: var(--glass-blur-mobile);
  box-shadow: var(--glass-highlight-top);
}

/* === PERFORMANCE-NOTES === */
/*
PERFORMANCE-BUDGET BREAKDOWN:

CRITICAL PATH (60fps garantiert):
- Navigation: 2px blur max
- Chat-Input: 2px blur max
- Scrollable areas: 2px blur max

CARDS & UI (gute Performance):
- Mobile: 4px blur max
- Desktop: 6-8px blur erlaubt

MODALS & OVERLAYS (temporär):
- Kurze Nutzung: 6-8px erlaubt
- Längere Nutzung: 4px empfohlen

ALTERNATIVE TECHNIKEN:
- Innen-Borders: Sehr performant
- Box-Shadows: Performant
- Gradients: Sehr performant
- Opacity + Background: Am performantesten

GPU-LAYER OPTIMIERUNG:
- will-change: transform für scrollable
- transform: translateZ(0) für Compositing
- Avoid nested backdrop-filters
*/
