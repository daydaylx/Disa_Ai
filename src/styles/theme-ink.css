/**
 * DISA AI - SCHIEFER & KREIDE THEME
 *
 * Konzept: Matte Schieferoberfl채che mit digitaler Kreide.
 * Ruhig, analog, warm und klar.
 */

:root {
  /* ========================================
   * COLOR PALETTE (Schiefer)
   * ======================================== */

  /* Slate Backgrounds - Clear layer hierarchy */
  --bg-app-rgb: 5 6 8;
  --bg-app: rgb(var(--bg-app-rgb));
  --bg-base: var(--bg-app);

  --bg-slate-rgb: 17 19 25;
  --bg-slate: rgb(var(--bg-slate-rgb));

  --bg-surface-rgb: 17 19 25;
  --bg-surface: rgb(var(--bg-surface-rgb));

  --bg-elevated-rgb: 21 24 33;
  --bg-elevated: rgb(var(--bg-elevated-rgb));
  --bg-surface-strong: var(--bg-elevated);

  --bg-pill-rgb: 26 29 38;
  --bg-pill: rgb(var(--bg-pill-rgb));

  --bg-page: var(--bg-app);

  /* Chalk Text */
  --ink-primary-rgb: 245 245 247;
  --ink-primary: rgb(var(--ink-primary-rgb));

  --ink-secondary-rgb: 160 164 174;
  --ink-secondary: rgb(var(--ink-secondary-rgb));

  --ink-tertiary-rgb: 108 112 122;
  --ink-tertiary: rgb(var(--ink-tertiary-rgb));

  --ink-on-accent: #0e0e0f;

  /* Chalk Accents */
  --accent-primary-rgb: 246 231 197;
  --accent-primary: rgb(var(--accent-primary-rgb));
  --accent-secondary: #7ddcd3; /* Ged채mpftes T체rkis f체r zarte Marker */
  --accent-tertiary: #ffcab8; /* Sanftes Kreide-Pink als Reserve */
  --accent-hover: #ffe199;

  /* Semantic Colors aligned to chalk warmth */
  --color-success: #a5d6a7;
  --color-warning: var(--accent-secondary);
  --color-error: #ef9a9a;

  /* Mapping to existing variable names for compatibility */
  --bg-0: var(--bg-app);
  --bg-1: var(--bg-surface);
  --bg-2: var(--bg-elevated);

  /* Legacy Theme Compatibility */
  --stone-base: var(--bg-app);
  --chalk-white: var(--ink-primary);
  --chalk-dim: var(--ink-secondary);
  --chalk-accent: var(--accent-primary);

  --surface-1: var(--bg-page);
  --surface-2: var(--bg-surface);
  --surface-3: var(--bg-surface-strong);
  --surface-inset: #0a0a0b;

  --text-primary: var(--ink-primary);
  --text-secondary: var(--ink-secondary);
  --text-muted: var(--ink-tertiary);
  --text-disabled: rgba(158, 158, 158, 0.5);
  --text-on-accent: var(--ink-on-accent);

  --accent: var(--accent-primary);
  --brand: var(--accent-primary);

  /* ========================================
   * SHADOWS & BORDERS (digitale Kreide)
   * ======================================== */

  /* Shadows - enhanced depth and separation */
  --shadow-paper: 0 2px 4px rgba(0, 0, 0, 0.5);
  --shadow-floating: 0 12px 32px rgba(0, 0, 0, 0.65);
  --shadow-elevated: 0 20px 60px rgba(0, 0, 0, 0.75), 0 0 0 1px rgba(255, 255, 255, 0.04);

  --shadow-sm: var(--shadow-paper);
  --shadow-md: var(--shadow-floating);
  --shadow-lg: var(--shadow-elevated);

  /* Borders - Chalk Lines */
  --border-color: rgba(236, 236, 236, 0.18);
  --border-chalk: rgba(236, 236, 236, 0.32);
  --border-chalk-strong: rgba(236, 236, 236, 0.55);
  --border-width: 1px;

  /* Radius */
  --r-sm: 8px;
  --r-md: 12px;
  --r-lg: 16px;

  /* ========================================
   * TYPOGRAPHY
   * ======================================== */

  --font-sans: "Inter", "IBM Plex Sans", "Cabin", system-ui, -apple-system, sans-serif;
  --text-base: 16px; /* slightly smaller for cleaner look? Spec said 17px base previously but standard is 16 */
  --leading-normal: 1.6;

  /* ========================================
   * TEXTURES
   * ======================================== */

  /* 3-6% noise simulation via repeating gradient or base64 (applied in index.css typically) */
  /* Here we define the color for the overlay */
  --noise-overlay-color: rgba(255, 255, 255, 0.04);

  /* Chalk Noise Pattern - subtle grain texture for slate surface */
  --chalk-noise: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="300" height="300" filter="url(%23noise)" opacity="0.05"/></svg>');

  /* Chalk Glow for text and borders - Enhanced visibility */
  --chalk-glow: 0 0 6px rgba(236, 236, 236, 0.18), 0 0 2px rgba(236, 236, 236, 0.24);
  --chalk-glow-strong: 0 0 10px rgba(236, 236, 236, 0.22), 0 0 3px rgba(236, 236, 236, 0.28);
  --chalk-glow-accent: 0 0 12px rgba(243, 214, 138, 0.35), 0 0 4px rgba(243, 214, 138, 0.45);
  --chalk-glow-accent-strong: 0 0 20px rgba(243, 214, 138, 0.5), 0 0 6px rgba(243, 214, 138, 0.6);

  /* Chalk Line - subtle blur for hand-drawn effect */
  --border-chalk-blur: rgba(236, 236, 236, 0.35);
  --chalk-line-shadow: 0 0 1px rgba(236, 236, 236, 0.4);

  /* Chalk Dust Particles - for interactive elements */
  --chalk-dust:
    radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 30%, rgba(255, 255, 255, 0.02) 0%, transparent 40%),
    radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.025) 0%, transparent 45%);

  /* Enhanced Shadows for depth */
  --shadow-slate-soft: 0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.02);
  --shadow-slate-deep: 0 4px 16px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.03);

  /* Improved Border with texture */
  --border-ink: rgba(236, 236, 236, 0.12);
}

:root[data-theme="dark"] {
  /* Ensure consistency in dark mode */
  --bg-app: #0e0e0f;
  --bg-page: #131314;
}

/* ========================================
 * CHALK UTILITY CLASSES
 * ======================================== */

.chalk-text {
  text-shadow: var(--chalk-glow);
  letter-spacing: 0.02em;
}

.chalk-text-strong {
  text-shadow: var(--chalk-glow-strong);
  letter-spacing: 0.02em;
  font-weight: 500;
}

.chalk-border {
  border-color: var(--border-chalk);
  box-shadow: var(--chalk-line-shadow);
}

.chalk-border-strong {
  border-color: var(--border-chalk-strong);
  box-shadow: var(--chalk-glow);
}

.slate-surface {
  background-color: var(--bg-surface);
  background-image: var(--chalk-noise);
  background-blend-mode: overlay;
}

.slate-surface-raised {
  background-color: var(--bg-surface);
  background-image: var(--chalk-noise), var(--chalk-dust);
  background-blend-mode: overlay, screen;
  box-shadow: var(--shadow-slate-soft);
}

/* Chalk-style focus states */
.chalk-focus:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--border-chalk-strong),
    var(--chalk-glow-accent);
}

/* Subtle texture overlay for containers */
.slate-texture::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: var(--chalk-noise);
  opacity: 0.6;
  pointer-events: none;
  z-index: 0;
}

/* Subtle pulse animation for presence indicators */
@keyframes presence-pulse {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 0 0 rgba(125, 220, 211, 0.5);
  }
  50% {
    opacity: 0.85;
    box-shadow: 0 0 0 6px rgba(125, 220, 211, 0);
  }
}

.presence-indicator {
  animation: presence-pulse 3s ease-in-out infinite;
}

/* ========================================
 * LEGACY MIGRATED CLASSES
 * ======================================== */

.border-chalk {
  border: 1px solid var(--ink-secondary);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.02);
  box-shadow: var(--shadow-paper);
}

.border-chalk-rough {
  border: 1.25px solid var(--ink-secondary);
  border-radius: 14px;
}

.border-chalk-pill {
  border: 1px solid var(--ink-primary);
  border-radius: 14px;
}

.btn-chalk {
  padding: 0.55rem 1.1rem;
  font-size: 1rem;
  line-height: 1.4rem;
  font-weight: 600;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 180ms;
  border: 1.25px solid var(--ink-primary);
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.05);
  color: var(--ink-primary);
  box-shadow: var(--shadow-floating);
}

.btn-chalk:hover {
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.08);
  transform: translateY(-1px);
  box-shadow: var(--shadow-elevated);
}

.input-chalk {
  background: transparent;
  border: none;
  border-bottom: 1.5px solid var(--ink-secondary);
  color: var(--ink-primary);
  font-family: var(--font-sans, "Inter", system-ui, sans-serif);
  font-size: 1rem;
  letter-spacing: -0.005em;
  padding: 0.25rem 0;
}

.input-chalk:focus {
  outline: none;
  border-bottom: 2px solid var(--ink-primary);
  box-shadow: 0 2px 0 rgba(255, 255, 255, 0.18);
}
