@tailwind base;
@tailwind components;
@tailwind utilities;

/* Dark Aurora Theme */
:root {
  color-scheme: dark;

  /* Neutrals / Text â€“ moody, klar lesbar */
  --bg: #0e1218;
  --surface-glass: rgba(255, 255, 255, 0.08);
  --border-glass: rgba(255, 255, 255, 0.18);
  --text: #eef2f7;
  --text-muted: #bcc7dd;

  /* Aurora Palette */
  --aurora-pink: #ff85e1;
  --aurora-magenta: #bf5af2;
  --aurora-violet: #7c4dff;
  --aurora-blue: #5b8cff;
  --aurora-cyan: #22d3ee;

  /* Accents */
  --accent-warm: #f59e0b;
  --accent-success: #10b981;
  --accent-error: #ef4444;

  /* Gradients */
  --grad-primary: linear-gradient(
    135deg,
    #ff85e1 4%,
    #bf5af2 28%,
    #7c4dff 56%,
    #5b8cff 80%,
    #22d3ee 96%
  );
  --grad-card: linear-gradient(
    145deg,
    rgba(255, 133, 225, 0.18),
    rgba(191, 90, 242, 0.16),
    rgba(124, 77, 255, 0.14),
    rgba(91, 140, 255, 0.12),
    rgba(34, 211, 238, 0.1)
  );
  --orb-radial: radial-gradient(
    circle at 50% 50%,
    #ffe3f5 0%,
    #ffb3ec 18%,
    #c69cff 35%,
    #7c4dff 55%,
    #5b8cff 72%,
    #22d3ee 88%,
    transparent 100%
  );

  /* Shadows / Glows */
  --shadow-soft: 0 12px 34px rgba(6, 10, 20, 0.45);
  --glow-primary: 0 0 20px rgba(124, 77, 255, 0.32), 0 0 36px rgba(91, 140, 255, 0.28);

  /* Ring for focus states */
  --ring: var(--aurora-cyan);

  /* Consistent spacing for touch targets (WCAG AA) */
  --tap-target-min: 44px;
  --tap-target-comfortable: 48px;
  --tap-target-compact: 40px;
}

/* Neon Glass Theme - activated with data-theme="neon" */
[data-theme="neon"] {
  /* Core background colors */
  --bg-primary: #090b11;
  --bg-surface: rgba(17, 22, 31, 0.72);
  --border-glass: rgba(255, 255, 255, 0.12);
  --text-primary: #e7ecf3;
  --text-secondary: #a9b0be;

  /* Accent colors */
  --accent-1: #a855f7;
  --accent-2: #22d3ee;
  --accent-3: #f472b6;

  /* Brand gradient */
  --brand-gradient: linear-gradient(135deg, #a855f7 0%, #22d3ee 45%, #f472b6 100%);
  --brand-grad: linear-gradient(135deg, #a855f7 0%, #22d3ee 45%, #f472b6 100%);

  /* Radius tokens */
  --radius-card: 24px;
  --radius-tile: 16px;
  --radius-pill: 9999px;

  /* Shadow & Glow tokens */
  --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.45);
  --glow-outer: 0 0 60px rgba(168, 85, 247, 0.35);
  --glow-ring: 0 0 18px rgba(34, 211, 238, 0.55);

  /* Motion tokens */
  --dur: 180ms;
  --ease: cubic-bezier(0.2, 0.8, 0.2, 1);

  /* Glass utilities */
  --bg-glass: var(--bg-surface);

  /* Neon glass surfaces */
  --surface-glass: var(--bg-surface);
  --bg: var(--bg-primary);
  --text: var(--text-primary);
  --text-muted: var(--text-secondary);
}

/* High-contrast users: slightly stronger surfaces/borders */
@media (prefers-contrast: more) {
  :root {
    --surface-glass: rgba(255, 255, 255, 0.14);
    --border-glass: rgba(255, 255, 255, 0.28);
    --text-muted: #d6def0;
  }

  [data-theme="neon"] {
    --bg-surface: rgba(17, 22, 31, 0.85);
    --border-glass: rgba(255, 255, 255, 0.18);
  }
}

@layer base {
  body {
    @apply bg-bg text-[16px] leading-7 text-text;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-bold;
  }
  h1 {
    @apply text-2xl;
  }
  h2 {
    @apply text-lg;
  }
}

@layer components {
  /* Import neon animations */
  @keyframes orb-pulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.9;
    }
  }

  @keyframes orb-focus-ring {
    0%,
    100% {
      transform: scale(1);
      opacity: 0.4;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.2;
    }
  }

  @keyframes orb-listening-ripple {
    0% {
      transform: scale(1);
      opacity: 0.3;
    }
    100% {
      transform: scale(1.8);
      opacity: 0;
    }
  }
  /* Enhanced focus indicators for accessibility */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-bg;
  }

  /* Interactive elements should have consistent focus styles */
  a,
  button,
  [role="button"],
  [tabindex]:not([tabindex="-1"]),
  input,
  textarea,
  select,
  [contenteditable] {
    @apply focus-ring;
  }

  /* Ensure focus is visible for keyboard navigation */
  @media (prefers-reduced-motion: no-preference) {
    .focus-ring {
      transition:
        box-shadow 0.15s ease-in-out,
        outline 0.15s ease-in-out;
    }
  }
  /* App background with faint aurora + grid */
  .app-bg {
    background-image:
      radial-gradient(60% 40% at 18% -6%, rgba(124, 77, 255, 0.08), transparent 60%),
      radial-gradient(52% 32% at 86% -12%, rgba(34, 211, 238, 0.07), transparent 56%),
      radial-gradient(64% 46% at 46% 118%, rgba(255, 133, 225, 0.05), transparent 60%),
      linear-gradient(
        180deg,
        rgba(0, 0, 0, 0.12),
        rgba(0, 0, 0, 0) 22%,
        rgba(0, 0, 0, 0) 78%,
        rgba(0, 0, 0, 0.1)
      ),
      repeating-linear-gradient(
        0deg,
        rgba(255, 255, 255, 0.02),
        rgba(255, 255, 255, 0.02) 1px,
        transparent 1px,
        transparent 22px
      ),
      repeating-linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.015),
        rgba(255, 255, 255, 0.015) 1px,
        transparent 1px,
        transparent 22px
      );
    background-blend-mode: lighten, lighten, normal, normal, normal, normal;
    background-attachment: fixed, fixed, fixed, scroll, scroll, scroll;
  }

  /* Decorative orb accent */
  .aurora-orb {
    position: absolute;
    width: 160px;
    height: 160px;
    border-radius: 9999px;
    background-image: var(--orb-radial);
    filter: blur(8px) saturate(120%);
    opacity: 0.45;
    pointer-events: none;
    z-index: -1;
  }
  /* Glassmorphism utility */
  .glass {
    @apply rounded-2xl border border-border-glass bg-surface-glass shadow-soft backdrop-blur-lg;
  }

  /* Card styles for lists/pickers */
  .card-solid {
    @apply rounded-2xl border border-border-glass bg-surface-glass text-text shadow-soft backdrop-blur-xl transition-colors;
  }
  .card-gradient {
    @apply rounded-2xl border border-border-glass bg-grad-card text-text shadow-glow transition-[transform,filter] hover:-translate-y-[1px] hover:saturate-110;
  }
  .card {
    @apply card-solid;
  }
  .glass-solid {
    @apply rounded-2xl border border-border-glass bg-surface-glass text-text shadow-soft backdrop-blur-xl;
  }

  /* Buttons */
  .btn {
    @apply inline-flex select-none items-center justify-center rounded-md font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-bg disabled:cursor-not-allowed disabled:opacity-60;
    min-height: var(--tap-target-min);
  }
  .btn-primary {
    @apply btn bg-grad-primary text-white shadow-glow;
  }
  .btn-secondary {
    @apply btn text-text glass hover:bg-white/10;
  }
  .btn-ghost {
    @apply btn text-text hover:bg-white/5;
  }
  .btn-outline {
    @apply btn border border-border bg-transparent text-text hover:bg-white/5;
  }
  .btn-subtle {
    @apply btn bg-white/5 text-text hover:bg-white/10;
  }
  .btn-destructive {
    @apply btn bg-destructive text-destructive-foreground hover:opacity-95 active:opacity-90;
  }

  /* Compact tabs */
  .tab {
    @apply inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 text-sm backdrop-blur-md transition-colors hover:bg-white/10;
    min-height: var(--tap-target-compact);
  }
  .tab--active {
    @apply border-transparent text-white shadow-lg;
    background-image: linear-gradient(135deg, #7c4dff 0%, #22d3ee 100%);
    filter: saturate(110%);
  }
  .tabs {
    @apply flex gap-2 rounded-2xl p-2 glass;
  }

  .badge {
    @apply rounded-full border border-white/15 bg-white/10 px-2 py-0.5 text-[11px];
  }

  .input-glass {
    @apply h-12 w-full rounded-full border border-white/10 bg-white/5 px-4 backdrop-blur-md placeholder:text-white/55 focus:outline-none focus:ring-2 focus:ring-ring/90;
  }

  .card-title {
    @apply text-xl font-semibold;
  }
  .help {
    @apply text-sm text-muted-foreground;
  }

  /* Inputs */
  .input {
    @apply h-11 w-full px-3 py-2 text-sm glass placeholder:text-text-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring;
  }

  /* Nav Pills */
  .nav-pill {
    @apply inline-flex items-center rounded-full px-3 py-1 text-sm text-text-muted transition glass hover:text-text;
    min-height: var(--tap-target-compact);
  }
  .nav-pill--active {
    @apply nav-pill relative bg-white/10 text-text;
  }
  .nav-pill--active::after {
    content: "";
    position: absolute;
    left: 16px;
    right: 16px;
    bottom: 6px;
    height: 2px;
    background: hsl(var(--ring));
    border-radius: 9999px;
  }

  /* Chat bubbles */
  .chat-bubble {
    position: relative;
    overflow: hidden;
    background-image: var(--grad-card);
    background-blend-mode: overlay;
    box-shadow:
      0 8px 26px rgba(0, 0, 0, 0.34),
      0 4px 18px rgba(124, 77, 255, 0.12),
      inset 0 0 0 1px rgba(255, 255, 255, 0.12);
    transition:
      box-shadow 160ms ease,
      filter 160ms ease;
  }
  @media (hover: hover) {
    .chat-bubble:hover {
      box-shadow:
        0 14px 36px rgba(124, 77, 255, 0.3),
        inset 0 0 0 1px rgba(255, 255, 255, 0.14);
      @apply saturate-106;
    }
  }

  /* User vs Assistant accents */
  .msg-user .chat-bubble {
    background-image: var(--grad-primary);
    color: #fff;
    box-shadow:
      0 14px 36px rgba(124, 77, 255, 0.4),
      0 8px 20px rgba(91, 140, 255, 0.24),
      inset 0 0 0 1px rgba(255, 255, 255, 0.14);
  }
  .msg-assistant .chat-bubble {
    background-image: none;
    background-color: var(--surface-glass);
  }

  /* Composer tweaks */
  .composer-glass {
    @apply border-t px-2 py-2 glass;
    background-color: color-mix(in oklab, var(--surface-glass) 92%, transparent);
  }
  .composer-input {
    @apply input w-full resize-none bg-transparent p-3 outline-none;
  }
  .composer-actions .btn {
    @apply rounded-xl;
  }

  /* Skeleton loading animations */
  @keyframes skeleton-loading {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  .skeleton {
    @apply animate-pulse rounded-md;
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.2) 50%,
      rgba(255, 255, 255, 0.1) 100%
    );
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s ease-in-out infinite;
  }

  /* Dark mode skeleton */
  .dark .skeleton {
    background: linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.1) 0%,
      rgba(0, 0, 0, 0.2) 50%,
      rgba(0, 0, 0, 0.1) 100%
    );
  }

  /* Safe area utilities for mobile */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  .safe-pad {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Touch target sizes for accessibility */
  .touch-target {
    min-height: var(--tap-target-min);
    min-width: var(--tap-target-min);
  }

  .touch-target-comfortable {
    min-height: var(--tap-target-comfortable);
    min-width: var(--tap-target-comfortable);
  }

  /* Skip link for accessibility */
  .skip-link {
    @apply absolute -top-full left-4 z-50 rounded bg-blue-600 px-4 py-2 text-white transition-all;
  }

  .skip-link:focus {
    @apply top-4;
  }

  /* High contrast mode adjustments */
  @media (prefers-contrast: high) {
    .btn-primary {
      @apply border-2 border-white;
    }

    .card,
    .glass {
      @apply border-2;
    }
  }
}
