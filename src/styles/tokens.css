/** file: src/styles/tokens.css */

/* ============================================================================
   Core Scales (spacing, radius, typography, shadows)
   ========================================================================== */

:root {
  --font-family-sans:
    "Inter", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
  --font-family-mono:
    "JetBrains Mono", "SFMono-Regular", Menlo, Monaco, Consolas, ui-monospace, monospace;

  /* 4pt spacing scale */
  --space-3xs: 4px;
  --space-2xs: 8px;
  --space-xs: 12px;
  --space-sm: 16px;
  --space-md: 20px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 40px;
  --space-3xl: 48px;
  --space-4xl: 64px;

  /* Stack/Inline aliases */
  --space-inline-3xs: var(--space-3xs);
  --space-inline-2xs: var(--space-2xs);
  --space-inline-xs: var(--space-xs);
  --space-inline-sm: var(--space-sm);
  --space-inline-md: var(--space-md);
  --space-inline-lg: var(--space-lg);
  --space-inline-xl: var(--space-xl);
  --space-inline-2xl: var(--space-2xl);
  --space-inline-3xl: var(--space-3xl);
  --space-stack-3xs: var(--space-3xs);
  --space-stack-2xs: var(--space-2xs);
  --space-stack-xs: var(--space-xs);
  --space-stack-sm: var(--space-sm);
  --space-stack-md: var(--space-md);
  --space-stack-lg: var(--space-lg);
  --space-stack-xl: var(--space-xl);
  --space-stack-2xl: var(--space-2xl);
  --space-stack-3xl: var(--space-3xl);
  --page-padding-x: var(--space-lg);
  --page-padding-y: var(--space-lg);

  /* Radius scale */
  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  --radius-pill: 999px;

  /* Shadows */
  --shadow-card: 0 12px 32px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 0.66));
  --shadow-overlay: 0 24px 60px rgba(2, 6, 23, calc(var(--glass-shadow-opacity) * 4));
  --shadow-ring: 0 0 0 2px color-mix(in srgb, var(--accent) 35%, transparent);
  --shadow-neo-sm: 0 4px 10px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 0.66));
  --shadow-neo-md: 0 8px 22px rgba(15, 23, 42, var(--glass-shadow-opacity));
  --shadow-neo-lg: 0 16px 30px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 1.33));
  --shadow-neo-xl: 0 24px 42px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 1.66));
  --shadow-inset-subtle: inset 0 1px 2px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 0.66));
  --shadow-inset-medium: inset 0 2px 4px rgba(15, 23, 42, var(--glass-shadow-opacity));
  --shadow-inset-strong: inset 0 3px 6px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 1.33));
  --shadow-inset-extreme: inset 0 4px 8px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 1.83));
  --shadow-depth-1: var(--shadow-neo-sm);
  --shadow-depth-2: var(--shadow-neo-md);
  --shadow-depth-3: var(--shadow-neo-lg);
  --shadow-depth-4: var(--shadow-neo-xl);
  --shadow-depth-5: 0 32px 64px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 1.83));
  --shadow-depth-6: 0 48px 96px rgba(15, 23, 42, calc(var(--glass-shadow-opacity) * 2.33));
  --shadow-neumorphic-sm: var(--shadow-neo-sm);
  --shadow-neumorphic-md: var(--shadow-neo-md);
  --shadow-neumorphic-lg: var(--shadow-neo-lg);
  --shadow-neumorphic-xl: var(--shadow-neo-xl);

  /* Motion */
  --motion-duration-quick: 120ms;
  --motion-duration-small: 150ms;
  --motion-duration-base: 180ms;
  --motion-duration-medium: 180ms;
  --motion-duration-slow: 320ms;
  --motion-ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --motion-ease-emphasized: cubic-bezier(0.2, 0, 0, 1);
  --motion-ease-accelerate: cubic-bezier(0.4, 0, 1, 1);
  --motion-ease-decelerate: cubic-bezier(0, 0, 0.2, 1);

  /* Glassmorphism */
  --glass-blur-strength: 20px;
  --glass-surface-opacity: 0.8;
  --glass-shadow-opacity: 0.12;
  --glass-border-opacity: 0.6;
  --accent-mix-percentage: 90%;

  /* Ripple Effect */
  --size-ripple-max: 20rem;
  --ripple-opacity: 0.18;

  /* Typography */
  --font-size-h1: 2rem; /* 32px */
  --line-height-h1: 1.25; /* 40px */
  --font-weight-h1: 700;
  --letter-spacing-h1: -0.02em;
  --font-size-h1-fluid: clamp(2rem, 5vw, 2.5rem); /* 32px to 40px */

  --font-size-h2: 1.5rem; /* 24px */
  --line-height-h2: 1.33; /* 32px */
  --font-weight-h2: 600;
  --letter-spacing-h2: -0.01em;
  --font-size-h2-fluid: clamp(1.5rem, 4vw, 1.875rem); /* 24px to 30px */

  --font-size-h3: 1.25rem; /* 20px */
  --line-height-h3: 1.4; /* 28px */
  --font-weight-h3: 600;
  --letter-spacing-h3: -0.01em;

  --font-size-h4: 1.125rem; /* 18px */
  --line-height-h4: 1.44; /* 26px */
  --font-weight-h4: 600;

  --font-size-h5: 1rem; /* 16px */
  --line-height-h5: 1.5; /* 24px */
  --font-weight-h5: 600;

  --font-size-h6: 0.875rem; /* 14px */
  --line-height-h6: 1.57; /* 22px */
  --font-weight-h6: 600;
  --letter-spacing-h6: 0.05em;

  --font-size-body: 1rem; /* 16px */
  --line-height-body: 1.6; /* 26px */
  --font-weight-body: 400;

  --font-size-body-sm: 0.875rem; /* 14px */
  --line-height-body-sm: 1.57; /* 22px */
  --font-weight-body-sm: 400;

  --font-size-body-lg: 1.125rem; /* 18px */
  --line-height-body-lg: 1.67; /* 30px */
  --font-weight-body-lg: 400;

  --font-size-caption: 0.75rem; /* 12px */
  --line-height-caption: 1.5; /* 18px */
  --font-weight-caption: 400;

  --font-size-caption-strong: 0.75rem; /* 12px */
  --line-height-caption-strong: 1.5; /* 18px */
  --font-weight-caption-strong: 600;

  --font-size-label: 0.875rem; /* 14px */
  --line-height-label: 1.43; /* 20px */
  --font-weight-label: 500;

  --font-size-label-sm: 0.75rem; /* 12px */
  --line-height-label-sm: 1.33; /* 16px */
  --font-weight-label-sm: 500;
  --letter-spacing-label-sm: 0.08em;

  --font-size-display: 2.5rem; /* 40px */
  --line-height-display: 1.2; /* 48px */
  --font-weight-display: 700;
  --letter-spacing-display: -0.03em;
  --font-size-display-fluid: clamp(2.5rem, 6vw, 3rem); /* 40px to 48px */

  --font-size-display-sm: 2rem; /* 32px */
  --line-height-display-sm: 1.25; /* 40px */
  --font-weight-display-sm: 700;
  --letter-spacing-display-sm: -0.02em;

  --font-size-code: 0.875em;
  --line-height-code: 1.5;
  --font-weight-code: 400;

  /* Touch targets */
  --size-touch-compact: 44px;
  --size-touch-comfortable: 48px;
  --size-touch-relaxed: 56px;
  --size-touch-spacious: 64px;

  /* Misc */
  --font-size-input: 16px;
  --mobile-gutter: var(--space-md);
  --mobile-safe-top: env(safe-area-inset-top, 0px);
  --mobile-safe-right: env(safe-area-inset-right, 0px);
  --mobile-safe-bottom: env(safe-area-inset-bottom, 0px);
  --mobile-safe-left: env(safe-area-inset-left, 0px);
  --mobile-safe-inline: max(env(safe-area-inset-left), env(safe-area-inset-right));
  --mobile-safe-block: max(env(safe-area-inset-bottom), env(safe-area-inset-top));
}

/* ============================================================================
   Theme tokens (light & dark via data-theme)
   ========================================================================== */

:root,
:root[data-theme="light"] {
  --bg0: #f5f6fb;
  --bg1: #ffffff;
  --bg2: #e3e7f4;
  --line: rgba(13, 18, 33, 0.08);

  --fg: #0f1426;
  --fg-muted: #454f65;
  --fg-subtle: #6d768f;

  --accent: #616dff;
  --accent-weak: #e7e9ff;
  --accent-contrast: #ffffff;

  --info: #2563eb;
  --info-soft: #e4edff;
  --success: #16a34a;
  --success-soft: #d1fae5;
  --warning: #f97316;
  --warning-soft: #fef3c7;
  --danger: #e11d48;
  --danger-soft: #fee2e2;
}

:root[data-theme="dark"] {
  --bg0: #05070f;
  --bg1: #0f1626;
  --bg2: #1c2435;
  --line: rgba(148, 163, 184, 0.24);

  --fg: #f5f7fb;
  --fg-muted: #c4cada;
  --fg-subtle: #8f98af;

  --accent: #8da2ff;
  --accent-weak: rgba(141, 162, 255, 0.18);
  --accent-contrast: #05070f;

  --info: #7ab5ff;
  --info-soft: rgba(122, 181, 255, 0.18);
  --success: #4ade80;
  --success-soft: rgba(74, 222, 128, 0.15);
  --warning: #fb923c;
  --warning-soft: rgba(251, 146, 60, 0.18);
  --danger: #fb7185;
  --danger-soft: rgba(251, 113, 133, 0.2);
}

/* ============================================================================
   Derived semantic tokens + legacy aliases
   ========================================================================== */

:root {
  /* Surfaces & text */
  --surface-bg: var(--bg0);
  --surface-base: var(--bg1);
  --surface-muted: color-mix(in srgb, var(--bg1) 85%, var(--bg2));
  --surface-raised: color-mix(in srgb, var(--bg1) 95%, rgba(255, 255, 255, 0.85));
  --surface-card: var(--surface-raised);
  --surface-overlay: color-mix(
    in srgb,
    var(--bg1) calc(var(--glass-surface-opacity) * 100%),
    rgba(5, 7, 15, 0.65)
  );
  --surface-ghost: color-mix(in srgb, var(--bg0) 90%, transparent);
  --surface-user-bubble: color-mix(in srgb, var(--accent) 9%, var(--surface-base));
  --surface-ai-bubble: var(--surface-raised);

  --fg0: var(--fg);
  --fg1: var(--fg-muted);
  --fg2: var(--fg-subtle);
  --fg-invert: #ffffff;

  --focus-ring-color: var(--accent);
  --focus-ring: 0 0 0 3px color-mix(in srgb, var(--focus-ring-color) 35%, transparent);

  /* Borders */
  --border-hairline: color-mix(
    in srgb,
    var(--line) calc(var(--glass-border-opacity) * 100%),
    transparent
  );
  --border-subtle: var(--line);
  --border-strong: color-mix(
    in srgb,
    var(--fg) calc(var(--glass-border-opacity) * 40%),
    transparent
  );

  /* Legacy aliases */
  --color-text-primary: var(--fg);
  --color-text-secondary: var(--fg-muted);
  --color-text-tertiary: var(--fg-subtle);
  --color-text-muted: var(--fg-subtle);
  --color-text-link: var(--accent);
  --color-text-link-hover: color-mix(in srgb, var(--accent) 80%, black);

  --color-brand-primary: var(--accent);
  --color-brand-primary-hover: color-mix(
    in srgb,
    var(--accent) var(--accent-mix-percentage),
    black
  );
  --color-brand-primary-active: color-mix(
    in srgb,
    var(--accent) calc(var(--accent-mix-percentage) - 10%),
    black
  );
  --color-brand-on-primary: var(--accent-contrast);
  --color-brand-subtle: var(--accent-weak);

  --color-accent-surface: color-mix(in srgb, var(--accent) 12%, var(--surface-base));
  --color-accent-surface-strong: color-mix(in srgb, var(--accent) 20%, var(--surface-base));
  --color-accent-border: color-mix(in srgb, var(--accent) 45%, transparent);
  --color-text-on-accent: var(--accent-contrast);

  --color-border-hairline: var(--border-hairline);
  --color-border-subtle: var(--border-subtle);
  --color-border-strong: var(--border-strong);
  --color-border-focus: color-mix(in srgb, var(--accent) 60%, var(--danger) 10%);
  --color-border-divider: var(--border-subtle);

  --color-surface-canvas: var(--surface-bg);
  --color-surface-base: var(--surface-base);
  --color-surface-subtle: var(--surface-muted);
  --color-surface-raised: var(--surface-raised);
  --color-surface-card: var(--surface-card);
  --color-surface-popover: var(--surface-card);
  --color-surface-overlay: var(--surface-overlay);

  --surface-neumorphic-base: var(--surface-bg);
  --surface-neumorphic-floating: var(--surface-card);
  --surface-neumorphic-raised: var(--surface-raised);
  --surface-neumorphic-pressed: color-mix(in srgb, var(--surface-card) 70%, rgba(0, 0, 0, 0.08));

  --color-status-success-fg: var(--success);
  --color-status-success-bg: var(--success-soft);
  --color-status-success-border: color-mix(in srgb, var(--success) 40%, transparent);
  --color-status-warning-fg: var(--warning);
  --color-status-warning-bg: var(--warning-soft);
  --color-status-warning-border: color-mix(in srgb, var(--warning) 40%, transparent);
  --color-status-danger-fg: var(--danger);
  --color-status-danger-bg: var(--danger-soft);
  --color-status-danger-border: color-mix(in srgb, var(--danger) 40%, transparent);
  --color-status-info-fg: var(--info);
  --color-status-info-bg: var(--info-soft);
  --color-status-info-border: color-mix(in srgb, var(--info) 40%, transparent);

  --color-surface-success: var(--success-soft);
  --color-surface-warning: var(--warning-soft);
  --color-surface-danger: var(--danger-soft);
  --color-surface-info: var(--info-soft);

  --color-action-primary-bg: var(--accent);
  --color-action-primary-hover: color-mix(in srgb, var(--accent) 90%, black);
  --color-action-primary-active: color-mix(in srgb, var(--accent) 70%, black);
  --color-action-primary-fg: var(--accent-contrast);

  --color-action-secondary-bg: var(--surface-muted);
  --color-action-secondary-hover: color-mix(in srgb, var(--surface-muted) 90%, var(--surface-bg));
  --color-action-secondary-active: color-mix(in srgb, var(--surface-muted) 80%, var(--surface-bg));
  --color-action-secondary-fg: var(--fg);
  --color-action-secondary-border: var(--border-subtle);

  --color-action-ghost-fg: var(--fg);
  --color-action-ghost-hover: color-mix(in srgb, var(--fg) 6%, transparent);
  --color-action-ghost-active: color-mix(in srgb, var(--fg) 12%, transparent);

  --color-action-destructive-bg: var(--danger);
  --color-action-destructive-hover: color-mix(in srgb, var(--danger) 90%, black);
  --color-action-destructive-active: color-mix(in srgb, var(--danger) 75%, black);
  --color-action-destructive-fg: #ffffff;

  --color-control-field-bg: color-mix(in srgb, var(--surface-base) 96%, rgba(255, 255, 255, 0.92));
  --color-control-field-hover: color-mix(
    in srgb,
    var(--surface-base) 98%,
    rgba(255, 255, 255, 0.94)
  );
  --color-control-field-disabled: color-mix(
    in srgb,
    var(--surface-muted) 85%,
    rgba(255, 255, 255, 0.9)
  );
  --color-control-field-fg: var(--fg);
  --color-control-field-placeholder: var(--fg-subtle);
  --color-control-field-border: var(--border-subtle);
  --color-control-field-border-hover: color-mix(in srgb, var(--border-subtle) 70%, var(--fg) 15%);
  --color-control-field-border-active: var(--color-border-focus);

  --bg-overlay-tooltip: color-mix(in srgb, var(--surface-overlay) 92%, rgba(5, 7, 15, 0.65));
  --overlay-tooltip-fg: var(--fg);
  --overlay-dialog: var(--surface-overlay);
  --overlay-dialog-border: var(--border-subtle);

  --mobile-safe-top: env(safe-area-inset-top, 0px);
  --mobile-safe-right: env(safe-area-inset-right, 0px);
  --mobile-safe-bottom: env(safe-area-inset-bottom, 0px);
  --mobile-safe-left: env(safe-area-inset-left, 0px);
}

/* Notes: Consolidated tokens provide new light/dark palettes plus aliases so legacy components keep working while the new system rolls out. */
