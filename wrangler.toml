# Cloudflare Pages Konfiguration für Issue #81
# Deployment-Härtung und Cache-Optimierung

name = "disa-ai"
compatibility_date = "2024-09-30"

[env.production]
  # Main branch als Produktionsumgebung
  route = "disaai.pages.dev"
  vars = { NODE_ENV = "production" }

[env.preview]
  # Alle anderen Branches als Preview
  vars = { NODE_ENV = "development" }

# Build-Konfiguration für bessere Performance
[build]
  command = "npm run build"
  cwd = ""
  watch_dir = "src"

# Cache-Purging für Asset-Updates
[site]
  bucket = "dist"

# Deploy-Hooks für automatische Cache-Invalidierung
[[env.production.services]]
  binding = "CACHE_PURGE"
  service = "cloudflare-cache-purge"